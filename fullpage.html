<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heygen — Full Page (Dark)</title>
  <meta name="color-scheme" content="dark">

  <style>
    /* ====== Dark base, full viewport ====== */
    :root {
      color-scheme: dark;
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: #0b0b0f;   /* very dark */
      color: #e6e6f0;         /* soft light text */
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    }

    /* ====== Force Heygen to cover the whole page ======
       We override their default bottom-left floating bubble. */
    #heygen-streaming-embed,
    #heygen-streaming-embed.expand {
      position: fixed !important;
      inset: 0 !important;          /* top/right/bottom/left = 0 */
      width: 100vw !important;
      height: 100vh !important;
      transform: none !important;
      border: 0 !important;
      border-radius: 0 !important;
      box-shadow: none !important;
      opacity: 1 !important;
      visibility: visible !important;
      z-index: 9999 !important;
      background: #0b0b0f;          /* match page background */
    }

    /* Ensure inner container/iframe stretch fully */
    #heygen-streaming-container {
      width: 100% !important;
      height: 100% !important;
    }
    #heygen-streaming-container iframe {
      width: 100% !important;
      height: 100% !important;
      border: 0 !important;
      display: block;
      background: #0b0b0f;
    }

    /* Hint kecil (akan hilang sendiri) */
    #hint {
      position: fixed;
      left: 50%;
      bottom: 20px;
      transform: translateX(-50%);
      padding: 10px 14px;
      font-size: 12px;
      background: rgba(255,255,255,0.08);
      color: #e6e6f0;
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 8px;
      opacity: .92;
      z-index: 10000;
      pointer-events: none;
      transition: opacity .4s ease;
    }
  </style>
</head>
<body>
  <div id="hint">Double‑click untuk fullscreen • Tekan <kbd>F</kbd> untuk toggle • <kbd>Esc</kbd> keluar</div>

  <script>!function(window){const host="https://labs.heygen.com",url=host+"/guest/streaming-embed?share=eyJxdWFsaXR5IjoiaGlnaCIsImF2YXRhck5hbWUiOiJNYXJpYW5uZV9SZWRfU3VpdF9wdWJsaWMi%0D%0ALCJwcmV2aWV3SW1nIjoiaHR0cHM6Ly9maWxlczIuaGV5Z2VuLmFpL2F2YXRhci92My80Y2IyMWU5%0D%0AZTE0NWY0N2JlODMxZTU2OGNmMWQ4Y2VhMl81NTM5MC9wcmV2aWV3X3RhcmdldC53ZWJwIiwibmVl%0D%0AZFJlbW92ZUJhY2tncm91bmQiOnRydWUsImtub3dsZWRnZUJhc2VJZCI6ImRlbW8tMSIsInVzZXJu%0D%0AYW1lIjoiZTRlNzAyYjA4MzE0NGFiZGI1MmVjMzUxYjViZGI2NGYifQ%3D%3D&inIFrame=1",clientWidth=document.body.clientWidth,wrapDiv=document.createElement("div");wrapDiv.id="heygen-streaming-embed";const container=document.createElement("div");container.id="heygen-streaming-container";const stylesheet=document.createElement("style");stylesheet.innerHTML=`\n  #heygen-streaming-embed {\n    z-index: 9999;\n    position: fixed;\n    left: 40px;\n    bottom: 40px;\n    width: 200px;\n    height: 200px;\n    border-radius: 50%;\n    border: 2px solid #fff;\n    box-shadow: 0px 8px 24px 0px rgba(0, 0, 0, 0.12);\n    transition: all linear 0.1s;\n    overflow: hidden;\n\n    opacity: 0;\n    visibility: hidden;\n  }\n  #heygen-streaming-embed.show {\n    opacity: 1;\n    visibility: visible;\n  }\n  #heygen-streaming-embed.expand {\n    ${clientWidth<540?"height: 266px; width: 96%; left: 50%; transform: translateX(-50%);":"height: 366px; width: calc(366px * 16 / 9);"}\n    border: 0;\n    border-radius: 8px;\n  }\n  #heygen-streaming-container {\n    width: 100%;\n    height: 100%;\n  }\n  #heygen-streaming-container iframe {\n    width: 100%;\n    height: 100%;\n    border: 0;\n  }\n  `;const iframe=document.createElement("iframe");iframe.allowFullscreen=!1,iframe.title="Streaming Embed",iframe.role="dialog",iframe.allow="microphone",iframe.src=url;let visible=!1,initial=!1;window.addEventListener("message",(e=>{e.origin===host&&e.data&&e.data.type&&"streaming-embed"===e.data.type&&("init"===e.data.action?(initial=!0,wrapDiv.classList.toggle("show",initial)):"show"===e.data.action?(visible=!0,wrapDiv.classList.toggle("expand",visible)):"hide"===e.data.action&&(visible=!1,wrapDiv.classList.toggle("expand",visible)))})),container.appendChild(iframe),wrapDiv.appendChild(stylesheet),wrapDiv.appendChild(container),document.body.appendChild(wrapDiv)}(globalThis);</script>


      const iframe = document.createElement("iframe");
      iframe.title = "Streaming Embed";
      iframe.role = "dialog";
      iframe.allow = "microphone";     // Heygen needs mic access
      iframe.src = url;

      // Enable fullscreen capability on init (dan juga sekarang)
      iframe.setAttribute("allowfullscreen", "");
      iframe.allowFullscreen = true;

      // Dengarkan event dari Heygen
      window.addEventListener("message", (e) => {
        if (e.origin !== host || !e.data || e.data.type !== "streaming-embed") return;

        if (e.data.action === "init") {
          wrapDiv.classList.add("show");
          // Sembunyikan hint setelah beberapa detik
          const hint = document.getElementById("hint");
          if (hint) setTimeout(() => {
            hint.style.opacity = 0; setTimeout(() => hint.remove(), 500);
          }, 3500);
        } else if (e.data.action === "show") {
          wrapDiv.classList.add("expand");
        } else if (e.data.action === "hide") {
          wrapDiv.classList.remove("expand");
        }
      });

      // ====== Fullscreen controls (opsional) ======
      function enterFS(el) {
        if (!document.fullscreenElement && el.requestFullscreen) el.requestFullscreen();
      }
      function exitFS() {
        if (document.fullscreenElement && document.exitFullscreen) document.exitFullscreen();
      }
      // Double‑click area video untuk fullscreen
      wrapDiv.addEventListener("dblclick", () => enterFS(wrapDiv));
      // Tombol 'F' untuk toggle fullscreen
      document.addEventListener("keydown", (ev) => {
        if (ev.key.toLowerCase() === "f") {
          if (document.fullscreenElement) exitFS(); else enterFS(wrapDiv);
        }
      });

      // Mount ke body
      container.appendChild(iframe);
      wrapDiv.appendChild(stylesheet);
      wrapDiv.appendChild(container);
      document.body.appendChild(wrapDiv);
    })();
  </script>
</body>
</html>
